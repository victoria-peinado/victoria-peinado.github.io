import{r as u,j as e,M as y,B as g,J as v,u as w,C,k as N,l as S,y as k,K as L}from"./index-Di-Zw_TF.js";import{u as E}from"./useAuthForm-CHir9XPs.js";import{F}from"./FullScreenCenter-CVxMyp6E.js";import{L as j}from"./Label-B4QQdoiM.js";import{I as b}from"./Input-BKMhVuRP.js";function P({isOpen:s,onClose:x}){const[h,n]=u.useState(""),[i,a]=u.useState(""),[o,r]=u.useState(""),[d,l]=u.useState(!1),p=async c=>{c.preventDefault(),r(""),a(""),l(!0);try{await v(h),a("Check your email for a reset link!"),l(!1)}catch(t){r("Failed to send reset email. Please check the address."),console.error(t),l(!1)}},m=()=>{x(),setTimeout(()=>{n(""),a(""),r(""),l(!1)},300)};return e.jsxs(y,{isOpen:s,onClose:m,title:"Reset Password",children:[i&&e.jsx("p",{className:"bg-primary-dark text-white p-3 rounded-lg text-center mb-4",children:i}),o&&e.jsx("p",{className:"bg-secondary text-white p-3 rounded-lg text-center mb-4",children:o}),!i&&e.jsxs("form",{onSubmit:p,children:[e.jsx("p",{className:"text-neutral-200 text-center mb-4",children:"Enter your email address and we'll send you a link."}),e.jsxs("div",{className:"mb-4",children:[e.jsx(j,{htmlFor:"reset-email",children:"Email"}),e.jsx(b,{type:"email",id:"reset-email",value:h,onChange:c=>n(c.target.value),required:!0})]}),e.jsx(g,{type:"submit",disabled:d,variant:"primary",children:d?"Sending...":"Send Reset Link"})]}),e.jsx(g,{onClick:m,variant:"neutral",className:"mt-4",children:"Close"})]})}function O(){const{t:s}=w(),{email:x,setEmail:h,password:n,setPassword:i,error:a,setError:o,loading:r,setLoading:d,navigate:l}=E(),[p,m]=u.useState(!1),c=async t=>{t.preventDefault(),o(""),d(!0);try{await L(x,n),l("/")}catch(f){o(s("login.error")),console.error(f)}d(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(P,{isOpen:p,onClose:()=>m(!1)}),e.jsx(F,{children:e.jsx(C,{children:e.jsxs(N,{className:"p-8",children:[e.jsxs(S,{className:"text-center mb-6",children:[s("login.title")," "]}),a&&e.jsx("p",{className:"bg-secondary text-white p-3 rounded-lg text-center mb-4",children:a}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(j,{htmlFor:"email",children:s("login.emailLabel")}),e.jsx(b,{type:"email",id:"email",value:x,onChange:t=>h(t.target.value),required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(j,{htmlFor:"password",children:s("login.passwordLabel")}),e.jsx(b,{type:"password",id:"password",value:n,onChange:t=>i(t.target.value),required:!0})]}),e.jsx("div",{className:"text-right mb-6",children:e.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-primary-light hover:text-primary",children:s("login.forgotPassword")})}),e.jsx(g,{type:"submit",variant:"primary",disabled:r,className:"w-full",children:s(r?"login.submitButtonLoading":"login.submitButton")})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-neutral-200",children:[s("login.signupPrompt")," "," ",e.jsx(k,{to:"/signup",className:"font-bold text-primary-light hover:text-primary",children:s("login.signupLink")})]})})]})})})]})}export{O as default};
